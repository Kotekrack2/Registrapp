<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Recuperar Contraseña</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="recover-container">
    <!-- Paso 1: Ingreso de correo electrónico -->
    <div *ngIf="!isCodeSent && !isPasswordRevealed">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Ingrese su correo electrónico</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <form (ngSubmit)="sendCode()" #emailForm="ngForm">
            <ion-item>
              <ion-label position="floating">Correo Electrónico</ion-label>
              <ion-input type="email" [(ngModel)]="email" name="email" required></ion-input>
            </ion-item>
            <ion-button expand="full" type="submit">Enviar Código</ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Paso 2: Ingreso del código de verificación -->
    <div *ngIf="isCodeSent && !isPasswordRevealed">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Verificación del Código</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <form (ngSubmit)="verifyCode()" #codeForm="ngForm">
            <ion-item>
              <ion-label position="floating">Código de Verificación</ion-label>
              <ion-input type="text" [(ngModel)]="verificationCode" name="verificationCode" required></ion-input>
            </ion-item>
            <ion-button expand="full" type="submit">Confirmar</ion-button>
          </form>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Paso 3: Mostrar contraseña antigua y botón de volver al login -->
    <div *ngIf="isPasswordRevealed">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Contraseña Antigua</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>Su contraseña antigua es: {{ oldPassword }}</p>
          <ion-button expand="full" (click)="goToLogin()">Volver al Login</ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>

